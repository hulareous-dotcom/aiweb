<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot AI 24/7 & H·ªó tr·ª£</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Gray 100 */
        }

        /* Navigation Tabs */
        .nav-item {
            cursor: pointer;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            color: #4b5563; /* Gray 600 */
            transition: all 0.2s;
            white-space: nowrap;
        }
        .nav-item:hover {
            background-color: #e5e7eb; /* Gray 200 */
            color: #1f2937; /* Gray 800 */
        }
        .nav-item.active {
            background-color: #2563eb; /* Blue 600 */
            color: white;
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.3);
        }

        /* Content Sections */
        .section-content {
            display: none;
            animation: slideUp 0.4s ease-out;
        }
        .section-content.active {
            display: block;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Chat Specific Styles */
        .chat-msg {
            max-width: 80%;
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            font-size: 0.95rem;
            line-height: 1.5;
            margin-bottom: 0.75rem;
            word-wrap: break-word;
        }
        .chat-msg-user {
            background-color: #2563eb;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 0.25rem;
        }
        .chat-msg-ai {
            background-color: #f3f4f6;
            color: #1f2937;
            align-self: flex-start;
            border: 1px solid #e5e7eb;
            border-bottom-left-radius: 0.25rem;
        }
        .typing-dot {
            display: inline-block;
            width: 6px;
            height: 6px;
            background-color: #9ca3af;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite ease-in-out both;
        }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #d1d5db;
            border-radius: 20px;
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- Header -->
    <header class="bg-white border-b border-gray-200 z-10 shadow-sm flex-none">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold mr-3">AI</div>
                    <h1 class="text-xl font-bold text-gray-900 tracking-tight">T·ªïng quan Chatbot AI 24/7</h1>
                </div>
                <div class="hidden md:block text-sm text-gray-500">
                    Gi·∫£i ph√°p ChƒÉm s√≥c Kh√°ch h√†ng T·ª± ƒë·ªông
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Bar -->
    <nav class="bg-white border-b border-gray-200 flex-none overflow-x-auto">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex space-x-1 py-3 min-w-max">
                <button onclick="switchTab('overview')" id="tab-overview" class="nav-item active">T·ªïng quan</button>
                <button onclick="switchTab('benefits')" id="tab-benefits" class="nav-item">L·ª£i √≠ch</button>
                <button onclick="switchTab('how')" id="tab-how" class="nav-item">C√°ch ho·∫°t ƒë·ªông</button>
                <button onclick="switchTab('apps')" id="tab-apps" class="nav-item">·ª®ng d·ª•ng</button>
                <button onclick="switchTab('challenges')" id="tab-challenges" class="nav-item">Th√°ch th·ª©c</button>
                <button onclick="switchTab('chat')" id="tab-chat" class="nav-item flex items-center text-blue-600 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 font-semibold border border-blue-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                    </svg>
                    Live Chat Demo
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow overflow-y-auto bg-gray-50 custom-scroll">
        <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 h-full">

            <!-- 1. Overview Section -->
            <div id="content-overview" class="section-content active">
                <div class="bg-white rounded-2xl shadow-sm p-8 border border-gray-200">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6">Chatbot AI: T∆∞∆°ng lai c·ªßa CSKH</h2>
                    <p class="text-lg text-gray-600 leading-relaxed mb-6">
                        Chatbot AI l√† c√°c ch∆∞∆°ng tr√¨nh m√°y t√≠nh s·ª≠ d·ª•ng Tr√≠ tu·ªá nh√¢n t·∫°o (AI), X·ª≠ l√Ω ng√¥n ng·ªØ t·ª± nhi√™n (NLP) v√† H·ªçc m√°y (Machine Learning) ƒë·ªÉ m√¥ ph·ªèng c√°c cu·ªôc tr√≤ chuy·ªán gi·ªëng nh∆∞ con ng∆∞·ªùi. Ch√∫ng kh√¥ng ch·ªâ tr·∫£ l·ªùi theo k·ªãch b·∫£n c√≥ s·∫µn m√† c√≤n c√≥ kh·∫£ nƒÉng hi·ªÉu √Ω ƒë·ªãnh v√† ng·ªØ c·∫£nh.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                        <div class="p-6 bg-blue-50 rounded-xl border border-blue-100">
                            <div class="text-blue-600 font-bold text-xl mb-2">24/7/365</div>
                            <p class="text-gray-600 text-sm">Ho·∫°t ƒë·ªông kh√¥ng ng·ª´ng ngh·ªâ, b·∫•t k·ªÉ l·ªÖ t·∫øt hay ƒë√™m khuya.</p>
                        </div>
                        <div class="p-6 bg-green-50 rounded-xl border border-green-100">
                            <div class="text-green-600 font-bold text-xl mb-2">T·ª©c th√¨</div>
                            <p class="text-gray-600 text-sm">Ph·∫£n h·ªìi kh√°ch h√†ng ngay l·∫≠p t·ª©c, lo·∫°i b·ªè th·ªùi gian ch·ªù ƒë·ª£i.</p>
                        </div>
                        <div class="p-6 bg-purple-50 rounded-xl border border-purple-100">
                            <div class="text-purple-600 font-bold text-xl mb-2">C√° nh√¢n h√≥a</div>
                            <p class="text-gray-600 text-sm">H·ªçc h·ªèi t·ª´ l·ªãch s·ª≠ ƒë·ªÉ ƒë∆∞a ra g·ª£i √Ω ph√π h·ª£p t·ª´ng ng∆∞·ªùi.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. Benefits Section -->
            <div id="content-benefits" class="section-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white rounded-2xl shadow-sm p-6 border border-gray-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Ph√¢n lo·∫°i L·ª£i √≠ch</h3>
                        <div class="h-64 flex justify-center">
                            <canvas id="benefitsChart"></canvas>
                        </div>
                        <p class="text-center text-sm text-gray-500 mt-4">T·ª∑ l·ªá c√¢n b·∫±ng gi·ªØa Hi·ªáu qu·∫£ Kinh doanh v√† Tr·∫£i nghi·ªám Kh√°ch h√†ng</p>
                    </div>
                    <div class="space-y-4">
                        <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm hover:shadow-md transition">
                            <h4 class="font-semibold text-blue-700">1. Ti·∫øt ki·ªám Chi ph√≠</h4>
                            <p class="text-gray-600 text-sm mt-1">Gi·∫£m chi ph√≠ nh√¢n s·ª± cho c√°c t√°c v·ª• l·∫∑p l·∫°i, cho ph√©p nh√¢n vi√™n t·∫≠p trung v√†o v·∫•n ƒë·ªÅ ph·ª©c t·∫°p.</p>
                        </div>
                        <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm hover:shadow-md transition">
                            <h4 class="font-semibold text-blue-700">2. TƒÉng Doanh thu</h4>
                            <p class="text-gray-600 text-sm mt-1">Ch·ªß ƒë·ªông ch√†o h√†ng, g·ª£i √Ω s·∫£n ph·∫©m (cross-sell/up-sell) ngay trong cu·ªôc tr√≤ chuy·ªán.</p>
                        </div>
                        <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm hover:shadow-md transition">
                            <h4 class="font-semibold text-green-700">3. C·∫£i thi·ªán Tr·∫£i nghi·ªám</h4>
                            <p class="text-gray-600 text-sm mt-1">Kh√°ch h√†ng kh√¥ng bao gi·ªù b·ªã b·ªè r∆°i, lu√¥n nh·∫≠n ƒë∆∞·ª£c ph·∫£n h·ªìi ngay l·∫≠p t·ª©c.</p>
                        </div>
                        <div class="bg-white rounded-xl p-5 border border-gray-200 shadow-sm hover:shadow-md transition">
                            <h4 class="font-semibold text-green-700">4. Thu th·∫≠p D·ªØ li·ªáu</h4>
                            <p class="text-gray-600 text-sm mt-1">Ghi nh·∫≠n m·ªçi t∆∞∆°ng t√°c ƒë·ªÉ ph√¢n t√≠ch xu h∆∞·ªõng v√† nhu c·∫ßu kh√°ch h√†ng.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. How it Works -->
            <div id="content-how" class="section-content">
                <div class="bg-white rounded-2xl shadow-sm p-8 border border-gray-200">
                    <h3 class="text-2xl font-bold text-gray-900 mb-8 text-center">Quy tr√¨nh X·ª≠ l√Ω c·ªßa AI</h3>
                    
                    <div class="relative">
                        <!-- Flow Steps -->
                        <div class="hidden md:block absolute top-1/2 left-0 w-full h-1 bg-gray-100 -translate-y-1/2 z-0"></div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 relative z-10">
                            <!-- Step 1 -->
                            <div onclick="showStepInfo(1)" class="bg-white p-4 border-2 border-blue-500 rounded-xl cursor-pointer hover:bg-blue-50 transition text-center step-card active" id="step-1">
                                <div class="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-3 font-bold">1</div>
                                <h4 class="font-bold text-gray-800">Nh·∫≠n tin nh·∫Øn</h4>
                                <p class="text-xs text-gray-500 mt-1">Kh√°ch h√†ng nh·∫≠p li·ªáu</p>
                            </div>
                            <!-- Step 2 -->
                            <div onclick="showStepInfo(2)" class="bg-white p-4 border-2 border-gray-200 rounded-xl cursor-pointer hover:border-blue-300 transition text-center step-card" id="step-2">
                                <div class="w-10 h-10 bg-gray-100 text-gray-600 rounded-full flex items-center justify-center mx-auto mb-3 font-bold">2</div>
                                <h4 class="font-bold text-gray-800">Ph√¢n t√≠ch (NLP)</h4>
                                <p class="text-xs text-gray-500 mt-1">Hi·ªÉu √Ω ƒë·ªãnh & th·ª±c th·ªÉ</p>
                            </div>
                            <!-- Step 3 -->
                            <div onclick="showStepInfo(3)" class="bg-white p-4 border-2 border-gray-200 rounded-xl cursor-pointer hover:border-blue-300 transition text-center step-card" id="step-3">
                                <div class="w-10 h-10 bg-gray-100 text-gray-600 rounded-full flex items-center justify-center mx-auto mb-3 font-bold">3</div>
                                <h4 class="font-bold text-gray-800">X·ª≠ l√Ω & Tra c·ª©u</h4>
                                <p class="text-xs text-gray-500 mt-1">K·∫øt n·ªëi Database/API</p>
                            </div>
                            <!-- Step 4 -->
                            <div onclick="showStepInfo(4)" class="bg-white p-4 border-2 border-gray-200 rounded-xl cursor-pointer hover:border-blue-300 transition text-center step-card" id="step-4">
                                <div class="w-10 h-10 bg-gray-100 text-gray-600 rounded-full flex items-center justify-center mx-auto mb-3 font-bold">4</div>
                                <h4 class="font-bold text-gray-800">Ph·∫£n h·ªìi</h4>
                                <p class="text-xs text-gray-500 mt-1">T·∫°o c√¢u tr·∫£ l·ªùi t·ª± nhi√™n</p>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8 p-6 bg-gray-50 rounded-xl border border-gray-200">
                        <h4 class="text-lg font-bold text-blue-700 mb-2" id="step-title">B∆∞·ªõc 1: Nh·∫≠n di·ªán ƒë·∫ßu v√†o</h4>
                        <p class="text-gray-700" id="step-desc">H·ªá th·ªëng ti·∫øp nh·∫≠n vƒÉn b·∫£n ho·∫∑c gi·ªçng n√≥i t·ª´ ng∆∞·ªùi d√πng. T·∫°i b∆∞·ªõc n√†y, AI s·∫Ω l√†m s·∫°ch d·ªØ li·ªáu (lo·∫°i b·ªè k√Ω t·ª± l·∫°, s·ª≠a l·ªói ch√≠nh t·∫£ c∆° b·∫£n) ƒë·ªÉ chu·∫©n b·ªã cho qu√° tr√¨nh ph√¢n t√≠ch.</p>
                    </div>
                </div>
            </div>

            <!-- 4. Applications -->
            <div id="content-apps" class="section-content">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div class="text-3xl mb-3">üõçÔ∏è</div>
                        <h3 class="font-bold text-lg mb-2">Th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠</h3>
                        <p class="text-gray-600 text-sm">T∆∞ v·∫•n ch·ªçn size, theo d√µi ƒë∆°n h√†ng, x·ª≠ l√Ω ƒë·ªïi tr·∫£ t·ª± ƒë·ªông.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div class="text-3xl mb-3">üè¶</div>
                        <h3 class="font-bold text-lg mb-2">Ng√¢n h√†ng</h3>
                        <p class="text-gray-600 text-sm">Tra c·ª©u s·ªë d∆∞, h·ªó tr·ª£ kh√≥a th·∫ª kh·∫©n c·∫•p, t∆∞ v·∫•n kho·∫£n vay.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div class="text-3xl mb-3">üè•</div>
                        <h3 class="font-bold text-lg mb-2">Y t·∫ø</h3>
                        <p class="text-gray-600 text-sm">ƒê·∫∑t l·ªãch kh√°m, nh·∫Øc nh·ªü u·ªëng thu·ªëc, t∆∞ v·∫•n tri·ªáu ch·ª©ng s∆° c·∫•p.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div class="text-3xl mb-3">‚úàÔ∏è</div>
                        <h3 class="font-bold text-lg mb-2">Du l·ªãch</h3>
                        <p class="text-gray-600 text-sm">ƒê·∫∑t v√© m√°y bay, check-in kh√°ch s·∫°n, g·ª£i √Ω ƒë·ªãa ƒëi·ªÉm ƒÉn u·ªëng.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <div class="text-3xl mb-3">üìö</div>
                        <h3 class="font-bold text-lg mb-2">Gi√°o d·ª•c</h3>
                        <p class="text-gray-600 text-sm">H·ªó tr·ª£ tuy·ªÉn sinh, gi·∫£i ƒë√°p th·ªß t·ª•c nh·∫≠p h·ªçc, t√¨m ki·∫øm kh√≥a h·ªçc.</p>
                    </div>
                </div>
            </div>

            <!-- 5. Challenges -->
            <div id="content-challenges" class="section-content">
                <div class="bg-yellow-50 border-l-4 border-yellow-400 p-6 rounded-r-xl mb-6">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
                            </svg>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-lg leading-6 font-medium text-yellow-800">Gi·ªõi h·∫°n c√¥ng ngh·ªá</h3>
                            <p class="mt-2 text-yellow-700 text-sm">
                                AI v·∫´n c√≥ th·ªÉ hi·ªÉu sai c√°c c√¢u h·ªèi ph·ª©c t·∫°p, ch√¢m bi·∫øm ho·∫∑c ng√¥n ng·ªØ ƒë·ªãa ph∆∞∆°ng ƒë·∫∑c th√π. ƒêi·ªÅu n√†y c√≥ th·ªÉ g√¢y ·ª©c ch·∫ø cho ng∆∞·ªùi d√πng.
                            </p>
                        </div>
                    </div>
                </div>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-gray-900 mb-2">Thi·∫øu s·ª± th·∫•u c·∫£m</h3>
                        <p class="text-gray-600 text-sm">Robot kh√¥ng th·ªÉ c·∫£m nh·∫≠n c·∫£m x√∫c. Trong c√°c t√¨nh hu·ªëng nh·∫°y c·∫£m (khi·∫øu n·∫°i gay g·∫Øt), con ng∆∞·ªùi v·∫´n x·ª≠ l√Ω t·ªët h∆°n.</p>
                    </div>
                     <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h3 class="font-bold text-gray-900 mb-2">B·∫£o m·∫≠t d·ªØ li·ªáu</h3>
                        <p class="text-gray-600 text-sm">Vi·ªác l∆∞u tr·ªØ l·ªãch s·ª≠ tr√≤ chuy·ªán ch·ª©a th√¥ng tin c√° nh√¢n ƒë√≤i h·ªèi c√°c ti√™u chu·∫©n b·∫£o m·∫≠t c·ª±c k·ª≥ kh·∫Øt khe.</p>
                    </div>
                 </div>
            </div>

            <!-- 6. Live Chat Demo (Integrated) -->
            <div id="content-chat" class="section-content h-full flex flex-col" style="height: calc(100vh - 200px);">
                <div class="flex-grow bg-white rounded-2xl shadow-lg border border-gray-200 flex flex-col overflow-hidden">
                    <!-- Chat Header -->
                    <div class="bg-gray-900 text-white px-6 py-4 flex justify-between items-center">
                        <div>
                            <h3 class="font-bold text-lg">H·ªó tr·ª£ tr·ª±c tuy·∫øn</h3>
                            <p class="text-xs text-gray-400 flex items-center mt-1">
                                <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                                Tr·ª±c tuy·∫øn
                            </p>
                        </div>
                        <div id="chat-status" class="text-xs bg-gray-800 px-3 py-1 rounded-full text-gray-300">
                            ƒêang k·∫øt n·ªëi...
                        </div>
                    </div>

                    <!-- Chat Messages Area -->
                    <div id="chat-window" class="flex-grow p-6 overflow-y-auto custom-scroll bg-white">
                        <!-- Welcome Message -->
                        <div class="chat-msg chat-msg-ai">
                            üëã Xin ch√†o! T√¥i l√† tr·ª£ l√Ω ·∫£o AI. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?
                            <br><span class="text-xs text-gray-400 mt-1 block">V·ª´a xong</span>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="p-4 bg-gray-50 border-t border-gray-200">
                        <form id="chat-form" class="flex gap-2">
                            <input type="text" id="chat-input" class="flex-grow px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..." autocomplete="off" disabled>
                            <button type="submit" id="chat-send-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center" disabled>
                                <span>G·ª≠i</span>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.5l1-5.5a1 1 0 011-1h2.5a1 1 0 00.992-.816l.5-4a1 1 0 00-.54-1.041z" />
                                </svg>
                            </button>
                        </form>
                        <div id="error-message" class="text-red-500 text-xs mt-2 text-center hidden"></div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Scripts -->
    <script>
        // --- Tab Switching Logic ---
        function switchTab(tabId) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(el => el.classList.remove('active'));
            // Deactivate all tabs
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
                el.classList.remove('bg-blue-600', 'text-white'); 
                // Restore original classes for chat tab if needed, but simpler to reset basic style
                if(el.id !== 'tab-chat') {
                    // Basic reset handled by CSS removal
                }
            });

            // Show target section
            document.getElementById(`content-${tabId}`).classList.add('active');
            
            // Activate target tab
            const activeBtn = document.getElementById(`tab-${tabId}`);
            activeBtn.classList.add('active');

            // Special init for Chart if not loaded
            if (tabId === 'benefits' && !window.chartInitialized) {
                initChart();
            }

            // Special init for Chat if not loaded
            if (tabId === 'chat' && !window.chatInitialized) {
                initChatModule();
            }
        }

        // --- Chart Logic ---
        function initChart() {
            const ctx = document.getElementById('benefitsChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Tr·∫£i nghi·ªám Kh√°ch h√†ng', 'Hi·ªáu qu·∫£ Kinh doanh'],
                    datasets: [{
                        data: [55, 45],
                        backgroundColor: ['#3b82f6', '#10b981'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
            window.chartInitialized = true;
        }

        // --- Interactive Flow Logic ---
        const stepData = {
            1: { title: "B∆∞·ªõc 1: Nh·∫≠n di·ªán ƒë·∫ßu v√†o", text: "H·ªá th·ªëng ti·∫øp nh·∫≠n vƒÉn b·∫£n ho·∫∑c gi·ªçng n√≥i. AI th·ª±c hi·ªán ti·ªÅn x·ª≠ l√Ω: chu·∫©n h√≥a vƒÉn b·∫£n, s·ª≠a l·ªói ch√≠nh t·∫£ v√† x√°c ƒë·ªãnh ng√¥n ng·ªØ." },
            2: { title: "B∆∞·ªõc 2: Ph√¢n t√≠ch (NLP)", text: "Natural Language Processing (NLP) b√≥c t√°ch c√¢u n√≥i ƒë·ªÉ hi·ªÉu '√ù ƒë·ªãnh' (Intent - Kh√°ch mu·ªën g√¨?) v√† 'Th·ª±c th·ªÉ' (Entity - Th√¥ng tin chi ti·∫øt nh∆∞ m√£ ƒë∆°n, ng√†y th√°ng)." },
            3: { title: "B∆∞·ªõc 3: X·ª≠ l√Ω d·ªØ li·ªáu", text: "H·ªá th·ªëng truy v·∫•n C∆° s·ªü d·ªØ li·ªáu (Database) ho·∫∑c g·ªçi API b√™n th·ª© 3 (CRM, h·ªá th·ªëng v·∫≠n ƒë∆°n) ƒë·ªÉ l·∫•y th√¥ng tin ch√≠nh x√°c d·ª±a tr√™n ph√¢n t√≠ch ·ªü B∆∞·ªõc 2." },
            4: { title: "B∆∞·ªõc 4: Ph·∫£n h·ªìi", text: "NLG (Natural Language Generation) t·∫°o ra c√¢u tr·∫£ l·ªùi t·ª± nhi√™n, th√¢n thi·ªán nh·∫•t v√† g·ª≠i l·∫°i cho kh√°ch h√†ng ch·ªâ trong mili gi√¢y." }
        };

        function showStepInfo(step) {
            document.querySelectorAll('.step-card').forEach(el => el.classList.remove('border-blue-500', 'bg-blue-50'));
            document.getElementById(`step-${step}`).classList.add('border-blue-500', 'bg-blue-50');
            
            const info = stepData[step];
            document.getElementById('step-title').textContent = info.title;
            document.getElementById('step-desc').textContent = info.text;
        }
    </script>

    <!-- Firebase & Chat Module -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, collection, query, orderBy, serverTimestamp, addDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        window.initChatModule = async function() {
            if (window.chatInitialized) return;
            window.chatInitialized = true;

            const statusEl = document.getElementById('chat-status');
            const errorEl = document.getElementById('error-message');
            const inputEl = document.getElementById('chat-input');
            const btnEl = document.getElementById('chat-send-btn');
            const chatWindow = document.getElementById('chat-window');

            // 1. ROBUST CONFIG LOADING
            let firebaseConfig = null;
            let appId = 'default-app';
            let initialToken = null;

            try {
                // Check if global variable exists
                if (typeof __firebase_config !== 'undefined') {
                    firebaseConfig = JSON.parse(__firebase_config);
                }
                if (typeof __app_id !== 'undefined') {
                    appId = __app_id;
                }
                if (typeof __initial_auth_token !== 'undefined') {
                    initialToken = __initial_auth_token;
                }
            } catch (e) {
                console.error("Config parsing error:", e);
                errorEl.textContent = "L·ªói ph√¢n t√≠ch c·∫•u h√¨nh h·ªá th·ªëng.";
                errorEl.classList.remove('hidden');
                statusEl.textContent = "L·ªói C·∫•u h√¨nh";
                statusEl.classList.replace('bg-gray-800', 'bg-red-600');
                return;
            }

            // 2. VALIDATION
            if (!firebaseConfig || !firebaseConfig.apiKey) {
                console.error("Firebase config missing");
                statusEl.textContent = "Thi·∫øu C·∫•u h√¨nh";
                statusEl.classList.replace('bg-gray-800', 'bg-red-600');
                errorEl.innerHTML = "Kh√¥ng t√¨m th·∫•y c·∫•u h√¨nh Firebase.<br>Vui l√≤ng ƒë·∫£m b·∫£o m√¥i tr∆∞·ªùng ch·∫°y (Canvas) ƒë√£ cung c·∫•p bi·∫øn __firebase_config.";
                errorEl.classList.remove('hidden');
                return;
            }

            // 3. INITIALIZE FIREBASE
            let db, auth;
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                statusEl.textContent = "ƒêang x√°c th·ª±c...";
                statusEl.classList.replace('bg-gray-800', 'bg-yellow-600');
            } catch (e) {
                console.error("Firebase init error:", e);
                statusEl.textContent = "L·ªói Kh·ªüi t·∫°o";
                statusEl.classList.replace('bg-yellow-600', 'bg-red-600');
                return;
            }

            // 4. AUTHENTICATION
            try {
                if (initialToken) {
                    await signInWithCustomToken(auth, initialToken);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (e) {
                console.error("Auth error:", e);
                statusEl.textContent = "L·ªói ƒêƒÉng nh·∫≠p";
                statusEl.classList.replace('bg-yellow-600', 'bg-red-600');
                errorEl.textContent = "Kh√¥ng th·ªÉ x√°c th·ª±c ng∆∞·ªùi d√πng ·∫©n danh.";
                errorEl.classList.remove('hidden');
                return;
            }

            // 5. AUTH STATE LISTENER & CHAT LOGIC
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    statusEl.textContent = "ƒê√£ k·∫øt n·ªëi (ID: " + user.uid.substring(0,6) + ")";
                    statusEl.classList.replace('bg-yellow-600', 'bg-green-600');
                    inputEl.disabled = false;
                    btnEl.disabled = false;
                    inputEl.placeholder = "Nh·∫≠p tin nh·∫Øn...";
                    
                    setupChatListeners(db, user.uid, appId);
                } else {
                    statusEl.textContent = "M·∫•t k·∫øt n·ªëi";
                    statusEl.classList.replace('bg-green-600', 'bg-red-600');
                    inputEl.disabled = true;
                    btnEl.disabled = true;
                }
            });
        };

        function setupChatListeners(db, userId, appId) {
            const chatWindow = document.getElementById('chat-window');
            const collectionPath = ['artifacts', appId, 'public', 'data', 'support_chats', 'global_room', 'messages'];
            
            // Helper to construct collection ref from array path
            let messagesRef = collection(db, ...collectionPath);

            const q = query(messagesRef, orderBy('timestamp', 'asc'));

            onSnapshot(q, (snapshot) => {
                // Keep the first welcome message if we want, or clear all. Let's clear all except welcome for simplicity, or re-render.
                // Strategy: Clear and re-render all to ensure order.
                chatWindow.innerHTML = `
                    <div class="chat-msg chat-msg-ai">
                        üëã Xin ch√†o! T√¥i l√† tr·ª£ l√Ω ·∫£o AI. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?
                        <br><span class="text-xs text-gray-400 mt-1 block">H·ªá th·ªëng</span>
                    </div>
                `;

                snapshot.docs.forEach(doc => {
                    const data = doc.data();
                    renderMessage(data.text, data.sender, data.timestamp);
                });
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }, (error) => {
                console.error("Snapshot error:", error);
            });

            // SEND LOGIC
            const form = document.getElementById('chat-form');
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                const input = document.getElementById('chat-input');
                const text = input.value.trim();
                if (!text) return;

                input.value = '';
                
                // 1. User Message
                await addDoc(messagesRef, {
                    text: text,
                    sender: 'user',
                    timestamp: serverTimestamp()
                });

                // 2. Simulate AI typing
                const typingId = showTyping();
                
                // 3. Simulate AI Response (Client-side logic for demo)
                setTimeout(async () => {
                    removeTyping(typingId);
                    const response = generateMockResponse(text);
                    await addDoc(messagesRef, {
                        text: response,
                        sender: 'ai',
                        timestamp: serverTimestamp()
                    });
                }, 1500);
            });
        }

        function renderMessage(text, sender, timestamp) {
            const chatWindow = document.getElementById('chat-window');
            const div = document.createElement('div');
            const isUser = sender === 'user';
            div.className = `chat-msg ${isUser ? 'chat-msg-user' : 'chat-msg-ai'}`;
            
            let timeStr = '';
            if (timestamp) {
                timeStr = new Date(timestamp.seconds * 1000).toLocaleTimeString('vi-VN', {hour:'2-digit', minute:'2-digit'});
            }

            div.innerHTML = `${text}<br><span class="text-xs opacity-70 mt-1 block text-right">${timeStr}</span>`;
            chatWindow.appendChild(div);
        }

        function showTyping() {
            const chatWindow = document.getElementById('chat-window');
            const div = document.createElement('div');
            const id = 'typing-' + Date.now();
            div.id = id;
            div.className = 'chat-msg chat-msg-ai';
            div.innerHTML = `
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
            `;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
            return id;
        }

        function removeTyping(id) {
            const el = document.getElementById(id);
            if (el) el.remove();
        }

        function generateMockResponse(input) {
            input = input.toLowerCase();
            if (input.includes('ch√†o') || input.includes('hi')) return "Ch√†o b·∫°n! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n v·ªÅ ƒë∆°n h√†ng ho·∫∑c d·ªãch v·ª•?";
            if (input.includes('gi√°') || input.includes('ph√≠')) return "S·∫£n ph·∫©m c·ªßa ch√∫ng t√¥i c√≥ nhi·ªÅu m·ª©c gi√° kh√°c nhau. B·∫°n quan t√¢m ƒë·∫øn g√≥i C∆° b·∫£n hay N√¢ng cao?";
            if (input.includes('l·ªói') || input.includes('kh√¥ng ƒë∆∞·ª£c')) return "T√¥i r·∫•t ti·∫øc v·ªÅ s·ª± c·ªë n√†y. B·∫°n vui l√≤ng cung c·∫•p m√£ l·ªói ho·∫∑c m√¥ t·∫£ chi ti·∫øt h∆°n ƒë·ªÉ t√¥i ki·ªÉm tra nh√©.";
            if (input.includes('c·∫£m ∆°n')) return "Kh√¥ng c√≥ g√¨! Ch√∫c b·∫°n m·ªôt ng√†y t·ªët l√†nh.";
            return "T√¥i ƒë√£ ghi nh·∫≠n c√¢u h·ªèi c·ªßa b·∫°n. Nh√¢n vi√™n h·ªó tr·ª£ s·∫Ω ph·∫£n h·ªìi chi ti·∫øt h∆°n trong gi√¢y l√°t.";
        }
    </script>
</body>
</html>
