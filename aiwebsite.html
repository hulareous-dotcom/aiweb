<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T·ªïng quan Chatbot AI 24/7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .nav-button {
            transition: all 0.3s ease;
            @apply px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-200;
        }
        .nav-button.active {
            @apply bg-blue-600 text-white hover:bg-blue-700;
        }
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
            min-height: 80vh; /* Ensure sections have height */
        }
        .content-section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            height: 300px;
            max-height: 350px;
            margin-left: auto;
            margin-right: auto;
        }
        .stat-card {
            @apply bg-white p-6 rounded-lg shadow-lg border border-gray-100;
        }
        .flow-step {
            @apply bg-white p-4 rounded-lg shadow-sm border border-gray-200 text-center cursor-pointer hover:shadow-md hover:border-blue-400 transition;
        }
        .flow-step.active {
            @apply bg-blue-100 border-blue-400 ring-2 ring-blue-300;
        }
        .app-tab {
            @apply w-full text-left px-4 py-3 rounded-md font-medium text-gray-700 hover:bg-gray-100 transition;
        }
        .app-tab.active {
            @apply bg-blue-100 text-blue-700;
        }

        /* --- CHATBOX STYLES (FROM aihotro.html) --- */
        .chat-container-embedded {
            height: 75vh; /* Shorter for embedding */
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-radius: 1.5rem;
            overflow: hidden;
            background-color: white;
        }
        #chat-window {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
        }
        .message-chat {
            max-width: 80%;
            margin-bottom: 1rem;
            padding: 0.75rem 1rem;
            border-radius: 1.25rem;
            line-height: 1.4;
        }
        .user-message-chat {
            background-color: #3b82f6; /* Blue 500 */
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 0.25rem;
        }
        .ai-message-chat {
            background-color: #e5e7eb; /* Gray 200 */
            color: #1f2937; /* Gray 800 */
            align-self: flex-start;
            border-bottom-left-radius: 0.25rem;
        }
        /* Custom scrollbar for better look */
        #chat-window::-webkit-scrollbar {
            width: 6px;
        }
        #chat-window::-webkit-scrollbar-thumb {
            background-color: #9ca3af;
            border-radius: 3px;
        }
        .loading-dot {
            animation: bounce 1.4s infinite ease-in-out both;
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #9ca3af;
            border-radius: 50%;
            margin: 0 2px;
        }
        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }
        /* --- END CHATBOX STYLES --- */

    </style>
</head>
<body class="text-gray-800">

    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <h1 class="text-2xl font-bold text-blue-700">Tr√¨nh kh√°m ph√°: Chatbot AI 24/7</h1>
            </div>
        </div>
    </header>

    <nav class="sticky top-0 bg-white/80 backdrop-blur-md shadow-md z-10 mb-8 border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-center space-x-2 sm:space-x-4 py-3">
                <button id="nav-home" class="nav-button active" data-section="home">T·ªïng quan</button>
                <button id="nav-benefits" class="nav-button" data-section="benefits">L·ª£i √≠ch</button>
                <button id="nav-how" class="nav-button" data-section="how">C√°ch th·ª©c</button>
                <button id="nav-apps" class="nav-button" data-section="apps">·ª®ng d·ª•ng</button>
                <button id="nav-challenges" class="nav-button" data-section="challenges">Th·ª≠ th√°ch</button>
                <button id="nav-chat" class="nav-button bg-green-500 hover:bg-green-600 text-white" data-section="chat">Tr√≤ chuy·ªán AI (Th·ª≠ nghi·ªám)</button>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">

        <!-- CONTENT SECTIONS FROM BT.HTML -->
        <!-- 1. T·ªîNG QUAN -->
        <section id="content-home" class="content-section active">
            <div class="bg-white p-8 rounded-lg shadow-xl border border-gray-100">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Chatbot AI: Ph·ª•c v·ª• Kh√°ch h√†ng 24/7</h2>
                <p class="text-lg text-gray-600 mb-6">
                    Chatbot AI (Tr√≠ tu·ªá nh√¢n t·∫°o) ƒë√£ tr·ªü th√†nh m·ªôt c√¥ng c·ª• quan tr·ªçng trong chi·∫øn l∆∞·ª£c chƒÉm s√≥c kh√°ch h√†ng (CSKH) c·ªßa nhi·ªÅu doanh nghi·ªáp. ƒê√¢y l√† c√°c ch∆∞∆°ng tr√¨nh m√°y t√≠nh ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ m√¥ ph·ªèng cu·ªôc tr√≤ chuy·ªán c·ªßa con ng∆∞·ªùi, cho ph√©p ch√∫ng t∆∞∆°ng t√°c, tr·∫£ l·ªùi c√¢u h·ªèi v√† gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ c·ªßa kh√°ch h√†ng b·∫•t k·ª≥ l√∫c n√†o, k·ªÉ c·∫£ ngo√†i gi·ªù h√†nh ch√≠nh.
                </p>
                <div class="border-t border-gray-200 pt-6">
                    <h3 class="text-2xl font-semibold text-gray-900 mb-3">K·∫øt lu·∫≠n</h3>
                    <p class="text-gray-700">
                        Chatbot AI ƒë√£ ph√°t tri·ªÉn t·ª´ m·ªôt t√≠nh nƒÉng "cho vui" tr·ªü th√†nh m·ªôt ph·∫ßn thi·∫øt y·∫øu c·ªßa h·ªá th·ªëng chƒÉm s√≥c kh√°ch h√†ng hi·ªán ƒë·∫°i. Kh·∫£ nƒÉng cung c·∫•p h·ªó tr·ª£ t·ª©c th√¨, li√™n t·ª•c 24/7 kh√¥ng ch·ªâ gi√∫p doanh nghi·ªáp t·ªëi ∆∞u h√≥a chi ph√≠ m√† c√≤n l√† y·∫øu t·ªë then ch·ªët ƒë·ªÉ n√¢ng cao s·ª± h√†i l√≤ng v√† l√≤ng trung th√†nh c·ªßa kh√°ch h√†ng trong m·ªôt th·∫ø gi·ªõi lu√¥n "tr·ª±c tuy·∫øn".
                    </p>
                </div>
            </div>
        </section>

        <!-- 2. L·ª¢I √çCH -->
        <section id="content-benefits" class="content-section">
            <h2 class="text-3xl font-bold text-gray-900 mb-2 text-center">L·ª£i √≠ch Ch√≠nh c·ªßa Chatbot AI 24/7</h2>
            <p class="text-lg text-gray-600 mb-8 text-center">
                Vi·ªác tri·ªÉn khai chatbot AI ƒë·ªÉ h·ªó tr·ª£ 24/7 mang l·∫°i nhi·ªÅu l·ª£i √≠ch v∆∞·ª£t tr·ªôi. ·ª®ng d·ª•ng n√†y chia l·ª£i √≠ch th√†nh hai nh√≥m ch√≠nh: c·∫£i thi·ªán tr·ª±c ti·∫øp **Tr·∫£i nghi·ªám Kh√°ch h√†ng** v√† tƒÉng **Hi·ªáu qu·∫£ Doanh nghi·ªáp**.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="stat-card">
                    <h3 class="text-xl font-semibold text-blue-700 mb-3">Ph√¢n t√≠ch T√°c ƒë·ªông</h3>
                    <p class="text-gray-600 mb-4">Bi·ªÉu ƒë·ªì n√†y t√≥m t·∫Øt 6 l·ª£i √≠ch ch√≠nh, ph√¢n lo·∫°i ch√∫ng th√†nh hai nh√≥m t√°c ƒë·ªông c·ªët l√µi.</p>
                    <div class="chart-container">
                        <canvas id="benefitsChart"></canvas>
                    </div>
                </div>
                
                <div class="space-y-6">
                    <div class="stat-card">
                        <h4 class="text-lg font-semibold text-gray-800 mb-2">S·ªë li·ªáu N·ªïi b·∫≠t</h4>
                        <div class="flex justify-around items-center text-center">
                            <div>
                                <div class="text-4xl font-bold text-blue-600">69%</div>
                                <p class="text-gray-600">Ng∆∞·ªùi ti√™u d√πng h√†i l√≤ng<br>v√¨ t·ªëc ƒë·ªô ph·∫£n h·ªìi</p>
                            </div>
                            <div>
                                <div class="text-4xl font-bold text-blue-600">50-70%</div>
                                <p class="text-gray-600">T√°c v·ª• CSKH c∆° b·∫£n<br>ƒë∆∞·ª£c t·ª± ƒë·ªông h√≥a</p>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <h4 class="text-lg font-semibold text-gray-800 mb-2">C√°c L·ª£i √≠ch C·ªët l√µi</h4>
                        <ul class="grid grid-cols-2 gap-x-4 gap-y-2">
                            <li class="flex items-center text-gray-700">
                                <span class="text-green-500 mr-2">‚úî</span> S·∫µn s√†ng 24/7/365
                            </li>
                            <li class="flex items-center text-gray-700">
                                <span class="text-green-500 mr-2">‚úî</span> Ph·∫£n h·ªìi t·ª©c th√¨
                            </li>
                            <li class="flex items-center text-gray-700">
                                <span class="text-green-500 mr-2">‚úî</span> Ti·∫øt ki·ªám chi ph√≠
                            </li>
                            <li class="flex items-center text-gray-700">
                                <span class="text-green-500 mr-2">‚úî</span> Kh·∫£ nƒÉng m·ªü r·ªông
                            </li>
                            <li class="flex items-center text-gray-700">
                                <span class="text-green-500 mr-2">‚úî</span> C·∫£i thi·ªán tr·∫£i nghi·ªám
                            </li>
                            <li class="flex items-center text-gray-700">
                                <span class="text-green-500 mr-2">‚úî</span> TƒÉng doanh thu
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. C√ÅCH TH·ª®C HO·∫†T ƒê·ªòNG -->
        <section id="content-how" class="content-section">
            <h2 class="text-3xl font-bold text-gray-900 mb-2 text-center">Chatbot AI Ho·∫°t ƒë·ªông nh∆∞ th·∫ø n√†o?</h2>
            <p class="text-lg text-gray-600 mb-8 text-center">
                Kh√¥ng gi·ªëng chatbot k·ªãch b·∫£n, chatbot AI s·ª≠ d·ª•ng nhi·ªÅu c√¥ng ngh·ªá ti√™n ti·∫øn ƒë·ªÉ hi·ªÉu v√† ph·∫£n h·ªìi. H√£y nh·∫•p v√†o t·ª´ng b∆∞·ªõc d∆∞·ªõi ƒë√¢y ƒë·ªÉ xem chi ti·∫øt.
            </p>
            
            <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4 mb-6">
                <div id="how-step-nlp" class="flow-step active flex-1 w-full md:w-auto" data-key="nlp">
                    <h4 class="font-semibold">1. X·ª≠ l√Ω Ng√¥n ng·ªØ T·ª± nhi√™n (NLP)</h4>
                </div>
                <div class="text-2xl font-bold text-blue-400 transform md:rotate-0">‚Üí</div>
                <div id="how-step-ml" class="flow-step flex-1 w-full md:w-auto" data-key="ml">
                    <h4 class="font-semibold">2. H·ªçc m√°y (Machine Learning)</h4>
                </div>
                <div class="text-2xl font-bold text-blue-400 transform md:rotate-0">‚Üí</div>
                <div id="how-step-integration" class="flow-step flex-1 w-full md:w-auto" data-key="integration">
                    <h4 class="font-semibold">3. T√≠ch h·ª£p H·ªá th·ªëng</h4>
                </div>
                <div class="text-2xl font-bold text-blue-400 transform md:rotate-0">‚Üí</div>
                 <div id="how-step-handoff" class="flow-step flex-1 w-full md:w-auto" data-key="handoff">
                    <h4 class="font-semibold">4. Chuy·ªÉn giao (Handoff)</h4>
                </div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-100 min-h-[150px]">
                <h3 id="how-detail-title" class="text-xl font-semibold text-blue-700 mb-3"></h3>
                <p id="how-detail-text" class="text-gray-700"></p>
            </div>
        </section>

        <!-- 4. ·ª®NG D·ª§NG -->
        <section id="content-apps" class="content-section">
            <h2 class="text-3xl font-bold text-gray-900 mb-2 text-center">·ª®ng d·ª•ng Th·ª±c t·∫ø Ph·ªï bi·∫øn</h2>
            <p class="text-lg text-gray-600 mb-8 text-center">
                Chatbot AI 24/7 ƒë∆∞·ª£c √°p d·ª•ng r·ªông r√£i trong nhi·ªÅu ng√†nh. Ch·ªçn m·ªôt ng√†nh ƒë·ªÉ kh√°m ph√° c√°c tr∆∞·ªùng h·ª£p s·ª≠ d·ª•ng c·ª• th·ªÉ.
            </p>
            
            <div class="flex flex-col md:flex-row gap-6">
                <div class="w-full md:w-1/4 flex flex-col space-y-2">
                    <button id="app-tab-ecommerce" class="app-tab active" data-key="ecommerce">Th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠</button>
                    <button id="app-tab-banking" class="app-tab" data-key="banking">Ng√¢n h√†ng & T√†i ch√≠nh</button>
                    <button id="app-tab-health" class="app-tab" data-key="health">Y t·∫ø & S·ª©c kh·ªèe</button>
                    <button id="app-tab-hospitality" class="app-tab" data-key="hospitality">Kh√°ch s·∫°n & Du l·ªãch</button>
                    <button id="app-tab-public" class="app-tab" data-key="public">H√†nh ch√≠nh c√¥ng</button>
                </div>
                <div class="w-full md:w-3/4">
                    <div class="bg-white p-8 rounded-lg shadow-lg border border-gray-100 min-h-[250px]">
                        <h3 id="app-detail-title" class="text-2xl font-semibold text-blue-700 mb-4"></h3>
                        <p id="app-detail-text" class="text-gray-700 text-lg leading-relaxed"></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 5. TH·ª¨ TH√ÅCH -->
        <section id="content-challenges" class="content-section">
            <h2 class="text-3xl font-bold text-gray-900 mb-2 text-center">Th√°ch th·ª©c v√† H·∫°n ch·∫ø</h2>
            <p class="text-lg text-gray-600 mb-8 text-center">
                M·∫∑c d√π m·∫°nh m·∫Ω, chatbot AI v·∫´n c√≥ nh·ªØng h·∫°n ch·∫ø c·∫ßn ƒë∆∞·ª£c xem x√©t v√† qu·∫£n l√Ω.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="stat-card">
                    <div class="text-4xl mb-3">‚ö†Ô∏è</div>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">V·∫•n ƒë·ªÅ Ph·ª©c t·∫°p</h3>
                    <p class="text-gray-600">Chatbot g·∫∑p kh√≥ khƒÉn khi x·ª≠ l√Ω c√°c v·∫•n ƒë·ªÅ m·ªõi, ƒë·ªôc nh·∫•t ho·∫∑c ƒë√≤i h·ªèi s·ª± ph√°n ƒëo√°n ph·ª©c t·∫°p m√† ch∆∞a ƒë∆∞·ª£c hu·∫•n luy·ªán.</p>
                </div>
                <div class="stat-card">
                    <div class="text-4xl mb-3">ü§î</div>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Thi·∫øu C·∫£m x√∫c</h3>
                    <p class="text-gray-600">Ch√∫ng kh√¥ng th·ªÉ hi·ªán ƒë∆∞·ª£c s·ª± ƒë·ªìng c·∫£m th·ª±c s·ª±, ƒëi·ªÅu n√†y r·∫•t quan tr·ªçng khi kh√°ch h√†ng ƒëang t·ª©c gi·∫≠n ho·∫∑c th·∫•t v·ªçng.</p>
                </div>
                <div class="stat-card">
                    <div class="text-4xl mb-3">üìä</div>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Ph·ª• thu·ªôc D·ªØ li·ªáu</h3>
                    <p class="text-gray-600">Chatbot ch·ªâ c√≥ th·ªÉ tr·∫£ l·ªùi d·ª±a tr√™n d·ªØ li·ªáu m√† n√≥ ƒë∆∞·ª£c "d·∫°y". D·ªØ li·ªáu ƒë√†o t·∫°o kh√¥ng ƒë·∫ßy ƒë·ªß ho·∫∑c l·ªói th·ªùi s·∫Ω d·∫´n ƒë·∫øn c√¢u tr·∫£ l·ªùi sai.</p>
                </div>
            </div>
        </section>

        <!-- 6. CHATBOX AI (NEW SECTION) -->
        <section id="content-chat" class="content-section">
            <div class="chat-container-embedded mx-auto w-full md:w-3/4">
                <!-- Header -->
                <header class="p-4 bg-gray-900 text-white flex items-center justify-between rounded-t-xl">
                    <h1 class="text-xl font-bold flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                        </svg>
                        Tr√≤ chuy·ªán H·ªó tr·ª£ AI (v2.5)
                    </h1>
                    <span id="user-id-display-chat" class="text-sm bg-gray-700 py-1 px-3 rounded-full hidden sm:inline-block">ID: ƒêang t·∫£i...</span>
                </header>

                <!-- Chat Window -->
                <div id="chat-window-chat" class="flex-grow overflow-y-auto p-4 flex flex-col">
                    <div class="ai-message-chat text-sm mb-4">
                        Ch√†o m·ª´ng! T√¥i l√† tr·ª£ l√Ω AI ·∫£o c·ªßa b·∫°n. H√£y cho t√¥i bi·∫øt b·∫°n c·∫ßn h·ªó tr·ª£ v·ªÅ v·∫•n ƒë·ªÅ g√¨ h√¥m nay.
                    </div>
                    <!-- Messages will be injected here -->
                </div>

                <!-- Input Area -->
                <div class="p-4 border-t border-gray-200 bg-gray-50">
                    <div id="auth-status-chat" class="text-xs text-center text-red-500 mb-2 hidden">
                        ƒêang ch·ªù k·∫øt n·ªëi c∆° s·ªü d·ªØ li·ªáu...
                    </div>
                    <form id="chat-form-chat" class="flex">
                        <input type="text" id="message-input-chat" placeholder="Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n..." class="flex-grow p-3 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150" autocomplete="off" required>
                        <button type="submit" id="send-button-chat" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-r-lg transition duration-150 flex items-center justify-center disabled:opacity-50" disabled>
                            G·ª≠i
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.5l1-5.5a1 1 0 011-1h2.5a1 1 0 00.992-.816l.5-4a1 1 0 00-.54-1.041z" />
                            </svg>
                        </button>
                    </form>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center py-8 mt-12 border-t border-gray-200">
        <p class="text-gray-500">M·ªôt ·ª©ng d·ª•ng t∆∞∆°ng t√°c d·ª±a tr√™n B√°o c√°o T·ªïng quan v·ªÅ Chatbot AI 24/7.</p>
    </footer>

    <!-- SCRIPT FOR SPA NAVIGATION AND BT.HTML CONTENT -->
    <script>
        // Data for BT.HTML sections
        const howItWorksData = {
            nlp: { title: 'X·ª≠ l√Ω Ng√¥n ng·ªØ T·ª± nhi√™n (NLP)', text: 'Gi√∫p chatbot hi·ªÉu ƒë∆∞·ª£c √Ω ƒë·ªãnh th·ª±c s·ª± c·ªßa kh√°ch h√†ng, ngay c·∫£ khi h·ªç s·ª≠ d·ª•ng ng√¥n ng·ªØ ƒë·ªùi th∆∞·ªùng, ti·∫øng l√≥ng, ho·∫∑c g√µ sai ch√≠nh t·∫£.' },
            ml: { title: 'H·ªçc m√°y (Machine Learning)', text: 'Chatbot "h·ªçc h·ªèi" t·ª´ c√°c cu·ªôc t∆∞∆°ng t√°c tr∆∞·ªõc ƒë√≥ ƒë·ªÉ ng√†y c√†ng tr·ªü n√™n th√¥ng minh v√† tr·∫£ l·ªùi ch√≠nh x√°c h∆°n theo th·ªùi gian.' },
            integration: { title: 'T√≠ch h·ª£p H·ªá th·ªëng', text: 'Ch√∫ng c√≥ th·ªÉ k·∫øt n·ªëi v·ªõi c√°c h·ªá th·ªëng backend nh∆∞ CRM ho·∫∑c ERP ƒë·ªÉ truy xu·∫•t th√¥ng tin c√° nh√¢n h√≥a (v√≠ d·ª•: "ƒê∆°n h√†ng c·ªßa t√¥i ƒëang ·ªü ƒë√¢u?").' },
            handoff: { title: 'Chuy·ªÉn giao cho Con ng∆∞·ªùi', text: 'Khi g·∫∑p m·ªôt y√™u c·∫ßu qu√° ph·ª©c t·∫°p ho·∫∑c kh√°ch h√†ng t·ªè ra th·∫•t v·ªçng, chatbot s·∫Ω t·ª± ƒë·ªông nh·∫≠n di·ªán v√† chuy·ªÉn ti·∫øp cu·ªôc tr√≤ chuy·ªán cho nh√¢n vi√™n h·ªó tr·ª£.' }
        };
        const appData = {
            ecommerce: { title: 'Th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ & B√°n l·∫ª', text: 'T∆∞ v·∫•n s·∫£n ph·∫©m, theo d√µi ƒë∆°n h√†ng, x·ª≠ l√Ω y√™u c·∫ßu ƒë·ªïi tr·∫£, v√† nh·∫Øc nh·ªü kh√°ch h√†ng v·ªÅ gi·ªè h√†ng b·ªã b·ªè qu√™n ƒë·ªÉ tƒÉng t·ª∑ l·ªá chuy·ªÉn ƒë·ªïi.' },
            banking: { title: 'Ng√¢n h√†ng & T√†i ch√≠nh', text: 'Tra c·ª©u s·ªë d∆∞, nh·∫Øc l·ªãch thanh to√°n h√≥a ƒë∆°n, gi·∫£i ƒë√°p th·∫Øc m·∫Øc v·ªÅ c√°c g√≥i d·ªãch v·ª•, v√† h·ªó tr·ª£ kh√≥a th·∫ª kh·∫©n c·∫•p 24/7. (V√≠ d·ª•: Eximbank t·∫°i Vi·ªát Nam).' },
            health: { title: 'Y t·∫ø & ChƒÉm s√≥c s·ª©c kh·ªèe', text: 'H·ªó tr·ª£ b·ªánh nh√¢n ƒë·∫∑t l·ªãch kh√°m b·ªánh, t·ª± ƒë·ªông nh·∫Øc nh·ªü l·ªãch u·ªëng thu·ªëc, v√† cung c·∫•p th√¥ng tin c∆° b·∫£n v·ªÅ c√°c tri·ªáu ch·ª©ng ho·∫∑c quy tr√¨nh chƒÉm s√≥c.' },
            hospitality: { title: 'Kh√°ch s·∫°n & Du l·ªãch', text: 'Gi√∫p kh√°ch h√†ng ƒë·∫∑t ph√≤ng, tr·∫£ l·ªùi c√°c c√¢u h·ªèi th∆∞·ªùng g·∫∑p v·ªÅ ti·ªán √≠ch kh√°ch s·∫°n, th·ªùi gian check-in/check-out, v√† c√°c d·ªãch v·ª• l√¢n c·∫≠n.' },
            public: { title: 'H√†nh ch√≠nh c√¥ng', text: 'Gi·∫£i ƒë√°p t·ª± ƒë·ªông v·ªÅ c√°c ch√≠nh s√°ch, th·ªß t·ª•c h√†nh ch√≠nh, v√† c√°c nghƒ©a v·ª• thu·∫ø. (V√≠ d·ª•: C·ª•c Thu·∫ø TP. H√† N·ªôi s·ª≠ d·ª•ng tr·ª£ l√Ω ·∫£o 24/7).' }
        };

        let benefitsChartInstance = null;
        let isChatInitialized = false;

        function showSection(sectionId) {
            const navButtons = document.querySelectorAll('.nav-button');
            const contentSections = document.querySelectorAll('.content-section');

            contentSections.forEach(section => {
                section.classList.remove('active');
            });
            navButtons.forEach(button => {
                button.classList.remove('active');
            });

            document.getElementById(`content-${sectionId}`).classList.add('active');
            document.getElementById(`nav-${sectionId}`).classList.add('active');

            // Initialize content when section is active
            if (sectionId === 'benefits' && !benefitsChartInstance) {
                initBenefitsChart();
            }
            if (sectionId === 'chat' && !isChatInitialized) {
                initChatboxModule();
            }
        }

        function initBenefitsChart() {
            const ctx = document.getElementById('benefitsChart').getContext('2d');
            benefitsChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Tr·∫£i nghi·ªám Kh√°ch h√†ng (3)', 'Hi·ªáu qu·∫£ Doanh nghi·ªáp (3)'],
                    datasets: [{
                        label: 'Ph√¢n lo·∫°i L·ª£i √≠ch',
                        data: [3, 3],
                        backgroundColor: ['rgba(59, 130, 246, 0.8)', 'rgba(22, 163, 74, 0.8)'],
                        borderColor: ['rgba(59, 130, 246, 1)', 'rgba(22, 163, 74, 1)'],
                        borderWidth: 1
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
            });
        }

        function updateHowItWorksDetail(key) {
            const howStepButtons = document.querySelectorAll('.flow-step');
            const howDetailTitle = document.getElementById('how-detail-title');
            const howDetailText = document.getElementById('how-detail-text');
            const data = howItWorksData[key];
            howDetailTitle.textContent = data.title;
            howDetailText.textContent = data.text;
            
            howStepButtons.forEach(btn => btn.classList.remove('active'));
            document.getElementById(`how-step-${key}`).classList.add('active');
        }
        
        function updateAppDetail(key) {
            const appTabButtons = document.querySelectorAll('.app-tab');
            const appDetailTitle = document.getElementById('app-detail-title');
            const appDetailText = document.getElementById('app-detail-text');
            const data = appData[key];
            appDetailTitle.textContent = data.title;
            appDetailText.textContent = data.text;
            
            appTabButtons.forEach(btn => btn.classList.remove('active'));
            document.getElementById(`app-tab-${key}`).classList.add('active');
        }
        
        // Initial setup for SPA navigation and content
        document.addEventListener('DOMContentLoaded', () => {
            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    showSection(button.dataset.section);
                });
            });

            const howStepButtons = document.querySelectorAll('.flow-step');
            howStepButtons.forEach(button => {
                button.addEventListener('click', () => {
                    updateHowItWorksDetail(button.dataset.key);
                });
            });
            
            const appTabButtons = document.querySelectorAll('.app-tab');
            appTabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    updateAppDetail(button.dataset.key);
                });
            });

            // Default view
            showSection('home');
            updateHowItWorksDetail('nlp');
            updateAppDetail('ecommerce');
        });
        
        // Function to be called when the Chat tab is opened for the first time
        function initChatboxModule() {
            if (isChatInitialized) return;
            isChatInitialized = true;
            // The actual chat initialization is in the module script below
            const script = document.getElementById('chat-module-script');
            if (script && typeof script.initChat === 'function') {
                 script.initChat();
            }
        }
    </script>
    
    <!-- FIREBASE AND CHAT LOGIC (MODULE SCRIPT FROM aihotro.html) -->
    <script id="chat-module-script" type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, collection, query, orderBy, serverTimestamp, addDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables provided by the Canvas environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        
        // C·∫£i thi·ªán ki·ªÉm tra c·∫•u h√¨nh Firebase
        let firebaseConfig = {};
        let initialAuthToken = null;
        try {
            const configString = typeof __firebase_config !== 'undefined' ? __firebase_config : '{}';
            firebaseConfig = JSON.parse(configString);
            initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        } catch (e) {
            console.error("Error parsing firebase config:", e);
        }

        let db;
        let auth;
        let userId = 'anonymous';
        const CHAT_COLLECTION = 'support_chats';
        const CHAT_DOC_ID = 'chat_room'; 

        // DOM elements for Chat
        const chatWindow = document.getElementById('chat-window-chat');
        const messageInput = document.getElementById('message-input-chat');
        const chatForm = document.getElementById('chat-form-chat');
        const sendButton = document.getElementById('send-button-chat');
        const userIdDisplay = document.getElementById('user-id-display-chat');
        const authStatus = document.getElementById('auth-status-chat');
        
        // --- Initialization and Authentication ---

        async function initializeFirebase() {
            try {
                // Ki·ªÉm tra xem c·∫•u h√¨nh c√≥ h·ª£p l·ªá kh√¥ng (√≠t nh·∫•t l√† c√≥ apiKey)
                if (!firebaseConfig || !firebaseConfig.apiKey) {
                    console.error("Firebase config is missing or invalid. Cannot initialize Firestore.");
                    authStatus.textContent = "L·ªói k·∫øt n·ªëi: Kh√¥ng t√¨m th·∫•y c·∫•u h√¨nh Firebase.";
                    authStatus.classList.remove('hidden', 'text-yellow-500');
                    authStatus.classList.add('text-red-500');
                    sendButton.disabled = true;
                    return;
                }
                
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                authStatus.textContent = "ƒêang x√°c th·ª±c...";
                authStatus.classList.remove('hidden', 'text-red-500');
                authStatus.classList.add('text-yellow-500');

                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        userIdDisplay.textContent = `ID: ${userId.substring(0, 8)}...`;
                        sendButton.disabled = false;
                        
                        // Start listening for messages
                        listenForChatMessages();
                        
                        authStatus.textContent = "ƒê√£ k·∫øt n·ªëi v√† s·∫µn s√†ng chat.";
                        authStatus.classList.remove('text-yellow-500', 'text-red-500');
                        authStatus.classList.add('text-green-500');
                        setTimeout(() => authStatus.classList.add('hidden'), 3000);
                    } else {
                        console.error("Authentication failed. Chat is disabled.");
                        authStatus.textContent = "L·ªói x√°c th·ª±c. Kh√¥ng th·ªÉ chat.";
                        authStatus.classList.remove('hidden', 'text-yellow-500');
                        authStatus.classList.add('text-red-500');
                        sendButton.disabled = true;
                    }
                });

            } catch (error) {
                console.error("Firebase initialization or authentication failed:", error);
                authStatus.textContent = `L·ªói nghi√™m tr·ªçng: ${error.message}`;
                authStatus.classList.remove('hidden', 'text-yellow-500');
                authStatus.classList.add('text-red-500');
                sendButton.disabled = true;
            }
        }

        // --- Chat Rendering Functions ---

        function formatTimestamp(timestamp) {
            if (!timestamp) return '';
            const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
            return date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' });
        }

        function renderMessage(message) {
            const isUser = message.sender === 'user';
            const messageDiv = document.createElement('div');
            messageDiv.className = `message-chat text-sm ${isUser ? 'user-message-chat' : 'ai-message-chat'}`;
            messageDiv.innerHTML = `
                <p>${message.text}</p>
                <span class="text-xs opacity-75 mt-1 block text-right">${formatTimestamp(message.timestamp)}</span>
            `;
            chatWindow.appendChild(messageDiv);
        }

        function scrollToBottom() {
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // --- Firestore Listener ---

        function listenForChatMessages() {
            const messagesCollectionRef = collection(db, 'artifacts', appId, 'public', 'data', CHAT_COLLECTION, CHAT_DOC_ID, 'messages');
            
            const q = query(messagesCollectionRef, orderBy('timestamp', 'asc'));

            onSnapshot(q, (snapshot) => {
                chatWindow.innerHTML = ''; // Clear existing messages
                
                // Re-render the initial welcome message
                chatWindow.innerHTML = `
                    <div class="ai-message-chat text-sm mb-4">
                        Ch√†o m·ª´ng! T√¥i l√† tr·ª£ l√Ω AI ·∫£o c·ªßa b·∫°n. H√£y cho t√¥i bi·∫øt b·∫°n c·∫ßn h·ªó tr·ª£ v·ªÅ v·∫•n ƒë·ªÅ g√¨ h√¥m nay.
                    </div>
                `;

                snapshot.docs.forEach(doc => {
                    const message = doc.data();
                    renderMessage(message);
                });
                scrollToBottom();
            }, (error) => {
                console.error("Error listening to chat messages:", error);
                authStatus.textContent = `L·ªói l·∫Øng nghe: ${error.message}`;
                authStatus.classList.remove('hidden');
            });
        }
        
        // --- AI Response Simulation/Integration ---
        
        async function getAiResponse(userMessage) {
            // --- N∆°i t√≠ch h·ª£p Gemini API th·ª±c t·∫ø ---
            
            // Hi·ªán t·∫°i, ch√∫ng ta s·ª≠ d·ª•ng ph·∫£n h·ªìi m√¥ ph·ªèng:
            const lowerCaseMsg = userMessage.toLowerCase();
            let aiText = "T√¥i xin l·ªói, t√¥i ch∆∞a th·ªÉ hi·ªÉu r√µ y√™u c·∫ßu c·ªßa b·∫°n. Vui l√≤ng cung c·∫•p th√™m chi ti·∫øt ho·∫∑c th·ª≠ c√°c t·ª´ kh√≥a nh∆∞ 'ƒë∆°n h√†ng', 'h√≥a ƒë∆°n', 'thanh to√°n'.";

            if (lowerCaseMsg.includes("ƒë∆°n h√†ng") || lowerCaseMsg.includes("mua")) {
                aiText = "ƒê·ªÉ ki·ªÉm tra tr·∫°ng th√°i ƒë∆°n h√†ng, vui l√≤ng cung c·∫•p M√£ ƒë∆°n h√†ng v√† T√™n kh√°ch h√†ng c·ªßa b·∫°n. T√¥i s·∫Ω ki·ªÉm tra ngay l·∫≠p t·ª©c.";
            } else if (lowerCaseMsg.includes("l·ªói") || lowerCaseMsg.includes("s·ª± c·ªë")) {
                aiText = "Ch√∫ng t√¥i r·∫•t xin l·ªói v√¨ s·ª± c·ªë n√†y. Vui l√≤ng m√¥ t·∫£ chi ti·∫øt v·∫•n ƒë·ªÅ b·∫°n ƒëang g·∫∑p ph·∫£i. T√¥i c√≥ th·ªÉ chuy·ªÉn b·∫°n ƒë·∫øn nh√¢n vi√™n h·ªó tr·ª£ k·ªπ thu·∫≠t n·∫øu c·∫ßn.";
            } else if (lowerCaseMsg.includes("c·∫£m ∆°n") || lowerCaseMsg.includes("t·∫°m bi·ªát")) {
                 aiText = "Kh√¥ng c√≥ g√¨, t√¥i r·∫•t s·∫µn l√≤ng gi√∫p ƒë·ª°! Ch√∫c b·∫°n m·ªôt ng√†y t·ªët l√†nh. N·∫øu b·∫°n c√≥ b·∫•t k·ª≥ c√¢u h·ªèi n√†o kh√°c, ƒë·ª´ng ng·∫ßn ng·∫°i quay l·∫°i.";
            }
            // --- K·∫øt th√∫c m√¥ ph·ªèng ---

            return aiText;
        }

        // --- Sending Message Logic ---

        let isAiTyping = false;
        
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'ai-message-chat text-sm flex items-center mb-4';
            typingDiv.innerHTML = `
                <span>AI ƒëang tr·∫£ l·ªùi</span>
                <span class="loading-dot ml-2"></span>
                <span class="loading-dot"></span>
                <span class="loading-dot"></span>
            `;
            chatWindow.appendChild(typingDiv);
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }
        
        async function sendMessage(text, sender) {
            const messageData = {
                text: text,
                sender: sender,
                timestamp: serverTimestamp() // Use server timestamp for accurate ordering
            };

            const messagesCollectionRef = collection(db, 'artifacts', appId, 'public', 'data', CHAT_COLLECTION, CHAT_DOC_ID, 'messages');
            
            try {
                await addDoc(messagesCollectionRef, messageData);
            } catch (error) {
                console.error("L·ªói khi g·ª≠i tin nh·∫Øn:", error);
                authStatus.textContent = `L·ªói g·ª≠i tin: ${error.message}`;
                authStatus.classList.remove('hidden');
            }
        }

        // Add event listener only when chat module is active
        function setupChatFormListener() {
            chatForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const userMessage = messageInput.value.trim();

                if (!userMessage || isAiTyping || sendButton.disabled) {
                    return;
                }

                await sendMessage(userMessage, 'user');
                
                messageInput.value = '';
                sendButton.disabled = true;
                isAiTyping = true;
                
                showTypingIndicator();

                try {
                    await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 500));
                    
                    const aiResponseText = await getAiResponse(userMessage);

                    await sendMessage(aiResponseText, 'ai');

                } catch (error) {
                    console.error("L·ªói khi nh·∫≠n ph·∫£n h·ªìi AI:", error);
                    await sendMessage("Xin l·ªói, h·ªá th·ªëng AI ƒëang g·∫∑p s·ª± c·ªë. Vui l√≤ng th·ª≠ l·∫°i sau.", 'ai');
                } finally {
                    hideTypingIndicator();
                    sendButton.disabled = false;
                    isAiTyping = false;
                }
            });
        }
        
        // Export init function to be called from the main script
        document.getElementById('chat-module-script').initChat = () => {
             // Ch·ªâ kh·ªüi t·∫°o Firebase n·∫øu c·∫•u h√¨nh c√≥ v·∫ª h·ª£p l·ªá
             if (firebaseConfig && firebaseConfig.apiKey) {
                initializeFirebase();
                setupChatFormListener();
             } else {
                 console.error("Chat initialization skipped: Firebase config is missing or invalid.");
                 authStatus.textContent = "L·ªói nghi√™m tr·ªçng: Vui l√≤ng cung c·∫•p c·∫•u h√¨nh Firebase.";
                 authStatus.classList.remove('hidden', 'text-yellow-500');
                 authStatus.classList.add('text-red-500');
                 sendButton.disabled = true;
             }
        };

    </script>
</body>
</html>
